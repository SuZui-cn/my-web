<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //URLSearchParams 方法
      // 创建一个URLSearchParams实例
      const urlSearchParams = new URLSearchParams(window.location.search);
      // 把键值对列表转换为一个对象
      const params = Object.fromEntries(urlSearchParams.entries());

      // split方法
      function getParams(url) {
        const res = {};
        if (url.includes('?')) {
          const str = url.split('?')[1];
          const arr = str.split('&');
          arr.forEach((item) => {
            const key = item.split('=')[0];
            const val = item.split('=')[1];
            res[key] = decodeURIComponent(val); // 解码
          });
        }
        return res;
      }

      // 测试
      const user = getParams(
        'http://www.baidu.com?user=%E9%98%BF%E9%A3%9E&age=16'
      );
      console.log(user); // { user: '阿飞', age: '16' }
    </script>
  </body>
</html>
